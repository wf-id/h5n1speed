{"version":"1.5.11","config":{"base":"sir_vaccine","include":null,"custom":null},"meta":{"internal":"internal","user":"user","state":"state","result":"state_next","output":"output","time":"step","initial_time":"initial_step"},"features":{"continuous":false,"discrete":true,"mixed":false,"has_array":true,"has_output":false,"has_user":true,"has_delay":false,"has_interpolate":false,"has_stochastic":true,"has_data":false,"has_compare":false,"has_include":false,"has_debug":false,"has_derivative":false,"initial_time_dependent":false},"data":{"elements":[{"name":"B","location":"variable","storage_type":"double","rank":1,"dimnames":{"length":"dim_B","dim":[],"mult":[]},"stage":"time"},{"name":"beta","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"detect_n","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_B","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_I","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_InfectedCNT","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_InterventionFLG","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_N","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_n_BR","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_n_IB","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_n_SI","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_n_SR","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_p_SI","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_R","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_S","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_S_inc","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dim_V_inc","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"dt","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"gamma","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"I","location":"variable","storage_type":"double","rank":1,"dimnames":{"length":"dim_I","dim":[],"mult":[]},"stage":"time"},{"name":"I_ini","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"InfectedCNT","location":"variable","storage_type":"double","rank":1,"dimnames":{"length":"dim_InfectedCNT","dim":[],"mult":[]},"stage":"time"},{"name":"initial_B","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_B","dim":[],"mult":[]},"stage":"user"},{"name":"initial_I","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_I","dim":[],"mult":[]},"stage":"user"},{"name":"initial_InfectedCNT","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_InfectedCNT","dim":[],"mult":[]},"stage":"user"},{"name":"initial_InterventionFLG","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_InterventionFLG","dim":[],"mult":[]},"stage":"user"},{"name":"initial_R","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_R","dim":[],"mult":[]},"stage":"user"},{"name":"initial_S","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_S","dim":[],"mult":[]},"stage":"user"},{"name":"initial_S_inc","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_S_inc","dim":[],"mult":[]},"stage":"user"},{"name":"initial_time","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"constant"},{"name":"initial_V_inc","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_V_inc","dim":[],"mult":[]},"stage":"user"},{"name":"intervention_scenario","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"InterventionFLG","location":"variable","storage_type":"double","rank":1,"dimnames":{"length":"dim_InterventionFLG","dim":[],"mult":[]},"stage":"time"},{"name":"kappa","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"N","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_N","dim":[],"mult":[]},"stage":"time"},{"name":"n_BR","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_n_BR","dim":[],"mult":[]},"stage":"time"},{"name":"n_IB","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_n_IB","dim":[],"mult":[]},"stage":"time"},{"name":"n_SI","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_n_SI","dim":[],"mult":[]},"stage":"time"},{"name":"n_SR","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_n_SR","dim":[],"mult":[]},"stage":"time"},{"name":"nsim","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"offset_variable_B","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"offset_variable_I","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"offset_variable_InfectedCNT","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"offset_variable_InterventionFLG","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"offset_variable_R","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"offset_variable_S_inc","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"offset_variable_V_inc","location":"internal","storage_type":"int","rank":0,"dimnames":null,"stage":"user"},{"name":"p_BR","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"p_IB","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"p_SI","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_p_SI","dim":[],"mult":[]},"stage":"time"},{"name":"p_SR","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"p_SR_int1","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"p_SR_int2","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"R","location":"variable","storage_type":"double","rank":1,"dimnames":{"length":"dim_R","dim":[],"mult":[]},"stage":"time"},{"name":"S","location":"variable","storage_type":"double","rank":1,"dimnames":{"length":"dim_S","dim":[],"mult":[]},"stage":"time"},{"name":"S_inc","location":"variable","storage_type":"double","rank":1,"dimnames":{"length":"dim_S_inc","dim":[],"mult":[]},"stage":"time"},{"name":"S_ini","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"steps_per_day","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"t_intervention","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"time","location":"variable","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"V_inc","location":"variable","storage_type":"double","rank":1,"dimnames":{"length":"dim_V_inc","dim":[],"mult":[]},"stage":"time"},{"name":"zeta","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"}],"variable":{"length":["+",["+",["+",["+",["+",["+",["+",["+","dim_B","dim_I"],"dim_InfectedCNT"],"dim_InterventionFLG"],"dim_R"],"dim_S"],"dim_S_inc"],"dim_V_inc"],1],"contents":[{"name":"time","offset":0,"initial":"initial_time"},{"name":"S","offset":1,"initial":"initial_S"},{"name":"I","offset":"offset_variable_I","initial":"initial_I"},{"name":"B","offset":"offset_variable_B","initial":"initial_B"},{"name":"R","offset":"offset_variable_R","initial":"initial_R"},{"name":"S_inc","offset":"offset_variable_S_inc","initial":"initial_S_inc"},{"name":"V_inc","offset":"offset_variable_V_inc","initial":"initial_V_inc"},{"name":"InfectedCNT","offset":"offset_variable_InfectedCNT","initial":"initial_InfectedCNT"},{"name":"InterventionFLG","offset":"offset_variable_InterventionFLG","initial":"initial_InterventionFLG"}]},"output":{"length":0,"contents":[]}},"equations":[{"name":"alloc_initial_B","type":"alloc","source":[65],"depends":{"functions":[],"variables":["dim_B"]},"lhs":"initial_B"},{"name":"alloc_initial_I","type":"alloc","source":[64],"depends":{"functions":[],"variables":["dim_I"]},"lhs":"initial_I"},{"name":"alloc_initial_InfectedCNT","type":"alloc","source":[69],"depends":{"functions":[],"variables":["dim_InfectedCNT"]},"lhs":"initial_InfectedCNT"},{"name":"alloc_initial_InterventionFLG","type":"alloc","source":[75],"depends":{"functions":[],"variables":["dim_InterventionFLG"]},"lhs":"initial_InterventionFLG"},{"name":"alloc_initial_R","type":"alloc","source":[66],"depends":{"functions":[],"variables":["dim_R"]},"lhs":"initial_R"},{"name":"alloc_initial_S","type":"alloc","source":[63],"depends":{"functions":[],"variables":["dim_S"]},"lhs":"initial_S"},{"name":"alloc_initial_S_inc","type":"alloc","source":[67],"depends":{"functions":[],"variables":["dim_S_inc"]},"lhs":"initial_S_inc"},{"name":"alloc_initial_V_inc","type":"alloc","source":[68],"depends":{"functions":[],"variables":["dim_V_inc"]},"lhs":"initial_V_inc"},{"name":"alloc_N","type":"alloc","source":[62],"depends":{"functions":[],"variables":["dim_N"]},"lhs":"N"},{"name":"alloc_n_BR","type":"alloc","source":[73],"depends":{"functions":[],"variables":["dim_n_BR"]},"lhs":"n_BR"},{"name":"alloc_n_IB","type":"alloc","source":[72],"depends":{"functions":[],"variables":["dim_n_IB"]},"lhs":"n_IB"},{"name":"alloc_n_SI","type":"alloc","source":[71],"depends":{"functions":[],"variables":["dim_n_SI"]},"lhs":"n_SI"},{"name":"alloc_n_SR","type":"alloc","source":[74],"depends":{"functions":[],"variables":["dim_n_SR"]},"lhs":"n_SR"},{"name":"alloc_p_SI","type":"alloc","source":[70],"depends":{"functions":[],"variables":["dim_p_SI"]},"lhs":"p_SI"},{"name":"beta","type":"user","source":[52],"depends":null,"lhs":"beta","user":{"default":1.42,"dim":false,"min":null,"max":null}},{"name":"detect_n","type":"user","source":[56],"depends":null,"lhs":"detect_n","user":{"default":1,"dim":false,"min":null,"max":null}},{"name":"dim_B","type":"expression_scalar","source":[65],"depends":{"functions":[],"variables":["nsim"]},"lhs":"dim_B","rhs":{"value":"nsim"}},{"name":"dim_I","type":"expression_scalar","source":[64],"depends":{"functions":[],"variables":["nsim"]},"lhs":"dim_I","rhs":{"value":"nsim"}},{"name":"dim_InfectedCNT","type":"expression_scalar","source":[69],"depends":{"functions":[],"variables":["nsim"]},"lhs":"dim_InfectedCNT","rhs":{"value":"nsim"}},{"name":"dim_InterventionFLG","type":"expression_scalar","source":[75],"depends":{"functions":[],"variables":["nsim"]},"lhs":"dim_InterventionFLG","rhs":{"value":"nsim"}},{"name":"dim_N","type":"expression_scalar","source":[62],"depends":{"functions":[],"variables":["nsim"]},"lhs":"dim_N","rhs":{"value":"nsim"}},{"name":"dim_n_BR","type":"expression_scalar","source":[73],"depends":{"functions":[],"variables":["nsim"]},"lhs":"dim_n_BR","rhs":{"value":"nsim"}},{"name":"dim_n_IB","type":"expression_scalar","source":[72],"depends":{"functions":[],"variables":["nsim"]},"lhs":"dim_n_IB","rhs":{"value":"nsim"}},{"name":"dim_n_SI","type":"expression_scalar","source":[71],"depends":{"functions":[],"variables":["nsim"]},"lhs":"dim_n_SI","rhs":{"value":"nsim"}},{"name":"dim_n_SR","type":"expression_scalar","source":[74],"depends":{"functions":[],"variables":["nsim"]},"lhs":"dim_n_SR","rhs":{"value":"nsim"}},{"name":"dim_p_SI","type":"expression_scalar","source":[70],"depends":{"functions":[],"variables":["nsim"]},"lhs":"dim_p_SI","rhs":{"value":"nsim"}},{"name":"dim_R","type":"expression_scalar","source":[66],"depends":{"functions":[],"variables":["nsim"]},"lhs":"dim_R","rhs":{"value":"nsim"}},{"name":"dim_S","type":"expression_scalar","source":[63],"depends":{"functions":[],"variables":["nsim"]},"lhs":"dim_S","rhs":{"value":"nsim"}},{"name":"dim_S_inc","type":"expression_scalar","source":[67],"depends":{"functions":[],"variables":["nsim"]},"lhs":"dim_S_inc","rhs":{"value":"nsim"}},{"name":"dim_V_inc","type":"expression_scalar","source":[68],"depends":{"functions":[],"variables":["nsim"]},"lhs":"dim_V_inc","rhs":{"value":"nsim"}},{"name":"dt","type":"expression_scalar","source":[2],"depends":{"functions":["/"],"variables":["steps_per_day"]},"lhs":"dt","rhs":{"value":["/",1,"steps_per_day"]}},{"name":"gamma","type":"user","source":[53],"depends":null,"lhs":"gamma","user":{"default":0.57,"dim":false,"min":null,"max":null}},{"name":"I_ini","type":"user","source":[51],"depends":null,"lhs":"I_ini","user":{"default":1,"dim":false,"min":null,"max":null}},{"name":"initial_B","type":"expression_array","source":[33],"depends":{"functions":["length"],"variables":["dim_B"]},"lhs":"initial_B","rhs":[{"index":[{"value":[":",1,["length","B"]],"is_range":true,"index":"i"}],"value":0}]},{"name":"initial_I","type":"expression_array","source":[32],"depends":{"functions":["length"],"variables":["dim_I","I_ini"]},"lhs":"initial_I","rhs":[{"index":[{"value":[":",1,["length","I"]],"is_range":true,"index":"i"}],"value":"I_ini"}]},{"name":"initial_InfectedCNT","type":"expression_array","source":[43],"depends":{"functions":["length"],"variables":["dim_InfectedCNT"]},"lhs":"initial_InfectedCNT","rhs":[{"index":[{"value":[":",1,["length","InfectedCNT"]],"is_range":true,"index":"i"}],"value":0}]},{"name":"initial_InterventionFLG","type":"expression_array","source":[46],"depends":{"functions":["length"],"variables":["dim_InterventionFLG"]},"lhs":"initial_InterventionFLG","rhs":[{"index":[{"value":[":",1,["length","InterventionFLG"]],"is_range":true,"index":"i"}],"value":0}]},{"name":"initial_R","type":"expression_array","source":[34],"depends":{"functions":["length"],"variables":["dim_R"]},"lhs":"initial_R","rhs":[{"index":[{"value":[":",1,["length","R"]],"is_range":true,"index":"i"}],"value":0}]},{"name":"initial_S","type":"expression_array","source":[31],"depends":{"functions":["length"],"variables":["dim_S","S_ini"]},"lhs":"initial_S","rhs":[{"index":[{"value":[":",1,["length","S"]],"is_range":true,"index":"i"}],"value":"S_ini"}]},{"name":"initial_S_inc","type":"expression_array","source":[37],"depends":{"functions":["length"],"variables":["dim_S_inc"]},"lhs":"initial_S_inc","rhs":[{"index":[{"value":[":",1,["length","S_inc"]],"is_range":true,"index":"i"}],"value":0}]},{"name":"initial_time","type":"expression_scalar","source":[3],"depends":null,"lhs":"initial_time","rhs":{"value":0}},{"name":"initial_V_inc","type":"expression_array","source":[40],"depends":{"functions":["length"],"variables":["dim_V_inc"]},"lhs":"initial_V_inc","rhs":[{"index":[{"value":[":",1,["length","V_inc"]],"is_range":true,"index":"i"}],"value":0}]},{"name":"intervention_scenario","type":"user","source":[57],"depends":null,"lhs":"intervention_scenario","user":{"default":1,"dim":false,"min":null,"max":null}},{"name":"kappa","type":"user","source":[54],"depends":null,"lhs":"kappa","user":{"default":0.143,"dim":false,"min":null,"max":null}},{"name":"N","type":"expression_array","source":[29],"depends":{"functions":["length","+","["],"variables":["dim_N","S","i","I","B","R","alloc_N"]},"lhs":"N","rhs":[{"index":[{"value":[":",1,["length","N"]],"is_range":true,"index":"i"}],"value":["+",["+",["+",["[","S","i"],["[","I","i"]],["[","B","i"]],["[","R","i"]]}]},{"name":"n_BR","type":"expression_array","source":[24],"depends":{"functions":["length","rbinom","[","*"],"variables":["dim_n_BR","B","i","p_BR","dt","alloc_n_BR"]},"lhs":"n_BR","rhs":[{"index":[{"value":[":",1,["length","n_BR"]],"is_range":true,"index":"i"}],"value":["rbinom",["[","B","i"],["*","p_BR","dt"]]}]},{"name":"n_IB","type":"expression_array","source":[23],"depends":{"functions":["length","rbinom","[","*"],"variables":["dim_n_IB","I","i","p_IB","dt","alloc_n_IB"]},"lhs":"n_IB","rhs":[{"index":[{"value":[":",1,["length","n_IB"]],"is_range":true,"index":"i"}],"value":["rbinom",["[","I","i"],["*","p_IB","dt"]]}]},{"name":"n_SI","type":"expression_array","source":[22],"depends":{"functions":["length","rbinom","[","*"],"variables":["dim_n_SI","S","i","p_SI","dt","alloc_n_SI"]},"lhs":"n_SI","rhs":[{"index":[{"value":[":",1,["length","n_SI"]],"is_range":true,"index":"i"}],"value":["rbinom",["[","S","i"],["*",["[","p_SI","i"],"dt"]]}]},{"name":"n_SR","type":"expression_array","source":[25],"depends":{"functions":["length","rbinom","[","*"],"variables":["dim_n_SR","S","i","p_SR","dt","alloc_n_SR"]},"lhs":"n_SR","rhs":[{"index":[{"value":[":",1,["length","n_SR"]],"is_range":true,"index":"i"}],"value":["rbinom",["[","S","i"],["*","p_SR","dt"]]}]},{"name":"nsim","type":"user","source":[61],"depends":null,"lhs":"nsim","user":{"default":500,"dim":false,"min":null,"max":null}},{"name":"offset_variable_B","type":"expression_scalar","source":[],"depends":{"functions":["+"],"variables":["dim_I","dim_S"]},"lhs":"offset_variable_B","rhs":{"value":["+",["+","dim_I","dim_S"],1]}},{"name":"offset_variable_I","type":"expression_scalar","source":[],"depends":{"functions":["+"],"variables":["dim_S"]},"lhs":"offset_variable_I","rhs":{"value":["+","dim_S",1]}},{"name":"offset_variable_InfectedCNT","type":"expression_scalar","source":[],"depends":{"functions":["+"],"variables":["dim_B","dim_I","dim_R","dim_S","dim_S_inc","dim_V_inc"]},"lhs":"offset_variable_InfectedCNT","rhs":{"value":["+",["+",["+",["+",["+",["+","dim_B","dim_I"],"dim_R"],"dim_S"],"dim_S_inc"],"dim_V_inc"],1]}},{"name":"offset_variable_InterventionFLG","type":"expression_scalar","source":[],"depends":{"functions":["+"],"variables":["dim_B","dim_I","dim_InfectedCNT","dim_R","dim_S","dim_S_inc","dim_V_inc"]},"lhs":"offset_variable_InterventionFLG","rhs":{"value":["+",["+",["+",["+",["+",["+",["+","dim_B","dim_I"],"dim_InfectedCNT"],"dim_R"],"dim_S"],"dim_S_inc"],"dim_V_inc"],1]}},{"name":"offset_variable_R","type":"expression_scalar","source":[],"depends":{"functions":["+"],"variables":["dim_B","dim_I","dim_S"]},"lhs":"offset_variable_R","rhs":{"value":["+",["+",["+","dim_B","dim_I"],"dim_S"],1]}},{"name":"offset_variable_S_inc","type":"expression_scalar","source":[],"depends":{"functions":["+"],"variables":["dim_B","dim_I","dim_R","dim_S"]},"lhs":"offset_variable_S_inc","rhs":{"value":["+",["+",["+",["+","dim_B","dim_I"],"dim_R"],"dim_S"],1]}},{"name":"offset_variable_V_inc","type":"expression_scalar","source":[],"depends":{"functions":["+"],"variables":["dim_B","dim_I","dim_R","dim_S","dim_S_inc"]},"lhs":"offset_variable_V_inc","rhs":{"value":["+",["+",["+",["+",["+","dim_B","dim_I"],"dim_R"],"dim_S"],"dim_S_inc"],1]}},{"name":"p_BR","type":"expression_scalar","source":[15],"depends":{"functions":["-","exp"],"variables":["kappa"]},"lhs":"p_BR","rhs":{"value":["-",1,["exp",["-","kappa"]]]}},{"name":"p_IB","type":"expression_scalar","source":[14],"depends":{"functions":["-","exp"],"variables":["gamma"]},"lhs":"p_IB","rhs":{"value":["-",1,["exp",["-","gamma"]]]}},{"name":"p_SI","type":"expression_array","source":[13],"depends":{"functions":["length","-","exp","/","*","["],"variables":["dim_p_SI","beta","I","i","N","alloc_p_SI"]},"lhs":"p_SI","rhs":[{"index":[{"value":[":",1,["length","p_SI"]],"is_range":true,"index":"i"}],"value":["-",1,["exp",["/",["*",["-","beta"],["[","I","i"]],["[","N","i"]]]]}]},{"name":"p_SR","type":"expression_scalar","source":[20],"depends":{"functions":["if",">"],"variables":["intervention_scenario","p_SR_int2","p_SR_int1"]},"lhs":"p_SR","rhs":{"value":["if",[">","intervention_scenario",1],"p_SR_int2","p_SR_int1"]}},{"name":"p_SR_int1","type":"expression_scalar","source":[16],"depends":{"functions":["if",">","as.integer","-","exp"],"variables":["time","t_intervention","zeta"]},"lhs":"p_SR_int1","rhs":{"value":["if",[">",["as.integer","time"],["as.integer","t_intervention"]],["-",1,["exp",["-","zeta"]]],0]}},{"name":"p_SR_int2","type":"expression_scalar","source":[17],"depends":{"functions":["if",">","odin_sum","as.integer","-","exp"],"variables":["S_inc","time","detect_n","zeta"]},"lhs":"p_SR_int2","rhs":{"value":["if",[">",["odin_sum","S_inc",["as.integer",1],["as.integer","time"]],"detect_n"],["-",1,["exp",["-","zeta"]]],0]}},{"name":"S_ini","type":"user","source":[50],"depends":null,"lhs":"S_ini","user":{"default":499,"dim":false,"min":null,"max":null}},{"name":"steps_per_day","type":"user","source":[1],"depends":null,"lhs":"steps_per_day","user":{"default":1,"dim":false,"min":null,"max":null}},{"name":"t_intervention","type":"user","source":[58],"depends":null,"lhs":"t_intervention","user":{"default":10,"dim":false,"min":null,"max":null}},{"name":"update_B","type":"expression_array","source":[9],"depends":{"functions":["length","-","+","["],"variables":["dim_B","B","i","n_IB","n_BR"]},"lhs":"B","rhs":[{"index":[{"value":[":",1,["length","B"]],"is_range":true,"index":"i"}],"value":["-",["+",["[","B","i"],["[","n_IB","i"]],["[","n_BR","i"]]}]},{"name":"update_I","type":"expression_array","source":[8],"depends":{"functions":["length","-","+","["],"variables":["dim_I","I","i","n_SI","n_IB"]},"lhs":"I","rhs":[{"index":[{"value":[":",1,["length","I"]],"is_range":true,"index":"i"}],"value":["-",["+",["[","I","i"],["[","n_SI","i"]],["[","n_IB","i"]]}]},{"name":"update_InfectedCNT","type":"expression_array","source":[44],"depends":{"functions":["length","if","==","%%","+","["],"variables":["dim_InfectedCNT","step","steps_per_day","InfectedCNT","i","n_SI"]},"lhs":"InfectedCNT","rhs":[{"index":[{"value":[":",1,["length","InfectedCNT"]],"is_range":true,"index":"i"}],"value":["if",["==",["%%","step","steps_per_day"],0],["+",["[","InfectedCNT","i"],["[","n_SI","i"]],["+",["[","InfectedCNT","i"],["[","n_SI","i"]]]}]},{"name":"update_InterventionFLG","type":"expression_array","source":[47],"depends":{"functions":["length"],"variables":["dim_InterventionFLG","p_SR"]},"lhs":"InterventionFLG","rhs":[{"index":[{"value":[":",1,["length","InterventionFLG"]],"is_range":true,"index":"i"}],"value":"p_SR"}]},{"name":"update_R","type":"expression_array","source":[10],"depends":{"functions":["length","+","["],"variables":["dim_R","R","i","n_BR","n_SR"]},"lhs":"R","rhs":[{"index":[{"value":[":",1,["length","R"]],"is_range":true,"index":"i"}],"value":["+",["+",["[","R","i"],["[","n_BR","i"]],["[","n_SR","i"]]}]},{"name":"update_S","type":"expression_array","source":[7],"depends":{"functions":["length","-","["],"variables":["dim_S","S","i","n_SI","n_SR"]},"lhs":"S","rhs":[{"index":[{"value":[":",1,["length","S"]],"is_range":true,"index":"i"}],"value":["-",["-",["[","S","i"],["[","n_SI","i"]],["[","n_SR","i"]]}]},{"name":"update_S_inc","type":"expression_array","source":[38],"depends":{"functions":["length","if","==","%%","[","+"],"variables":["dim_S_inc","step","steps_per_day","n_SI","i","S_inc"]},"lhs":"S_inc","rhs":[{"index":[{"value":[":",1,["length","S_inc"]],"is_range":true,"index":"i"}],"value":["if",["==",["%%","step","steps_per_day"],0],["[","n_SI","i"],["+",["[","S_inc","i"],["[","n_SI","i"]]]}]},{"name":"update_time","type":"expression_scalar","source":[4],"depends":{"functions":["*","(","+"],"variables":["step","dt"]},"lhs":"time","rhs":{"value":["*",["(",["+","step",1]],"dt"]}},{"name":"update_V_inc","type":"expression_array","source":[41],"depends":{"functions":["length","if","==","%%","[","+"],"variables":["dim_V_inc","step","steps_per_day","n_SR","i","V_inc"]},"lhs":"V_inc","rhs":[{"index":[{"value":[":",1,["length","V_inc"]],"is_range":true,"index":"i"}],"value":["if",["==",["%%","step","steps_per_day"],0],["[","n_SR","i"],["+",["[","V_inc","i"],["[","n_SR","i"]]]}]},{"name":"zeta","type":"user","source":[55],"depends":null,"lhs":"zeta","user":{"default":0.1,"dim":false,"min":null,"max":null}}],"debug":[],"components":{"create":{"variables":[],"equations":["initial_time"]},"user":{"variables":[],"equations":["beta","detect_n","gamma","I_ini","intervention_scenario","kappa","nsim","S_ini","steps_per_day","t_intervention","zeta","dim_B","dim_I","dim_InfectedCNT","dim_InterventionFLG","dim_N","dim_n_BR","dim_n_IB","dim_n_SI","dim_n_SR","dim_p_SI","dim_R","dim_S","dim_S_inc","dim_V_inc","dt","p_BR","p_IB","alloc_initial_B","alloc_initial_I","alloc_initial_InfectedCNT","alloc_initial_InterventionFLG","alloc_initial_R","alloc_initial_S","alloc_initial_S_inc","alloc_initial_V_inc","alloc_N","alloc_n_BR","alloc_n_IB","alloc_n_SI","alloc_n_SR","alloc_p_SI","initial_B","initial_I","initial_InfectedCNT","initial_InterventionFLG","initial_R","initial_S","initial_S_inc","initial_V_inc","offset_variable_B","offset_variable_I","offset_variable_InfectedCNT","offset_variable_InterventionFLG","offset_variable_R","offset_variable_S_inc","offset_variable_V_inc"]},"initial":{"variables":[],"equations":[]},"rhs":{"variables":["time","S","I","B","R","S_inc","V_inc","InfectedCNT"],"equations":["p_SR_int1","p_SR_int2","p_SR","update_time","N","n_BR","n_IB","n_SR","update_InterventionFLG","p_SI","update_B","update_R","update_V_inc","n_SI","update_I","update_InfectedCNT","update_S","update_S_inc"]},"update_stochastic":{"variables":[],"equations":[]},"output":{"variables":[],"equations":[]},"compare":{"variables":[],"equations":[]}},"user":[{"name":"beta","has_default":true},{"name":"detect_n","has_default":true},{"name":"gamma","has_default":true},{"name":"I_ini","has_default":true},{"name":"intervention_scenario","has_default":true},{"name":"kappa","has_default":true},{"name":"nsim","has_default":true},{"name":"S_ini","has_default":true},{"name":"steps_per_day","has_default":true},{"name":"t_intervention","has_default":true},{"name":"zeta","has_default":true}],"interpolate":{"min":[],"max":[],"critical":[]},"source":["steps_per_day <- user(1)","dt <- 1 / steps_per_day","initial(time) <- 0","update(time) <- (step + 1) * dt","","## Compartments","update(S[]) <- S[i] - n_SI[i] - n_SR[i]","update(I[]) <- I[i] + n_SI[i] - n_IB[i]","update(B[]) <- B[i] + n_IB[i] - n_BR[i]","update(R[]) <- R[i] + n_BR[i] + n_SR[i]","","## Transition probs","p_SI[] <- 1 - exp(-beta * I[i] / N[i]) # S to I","p_IB <- 1 - exp(-gamma) # I to B1","p_BR <- 1 - exp(-kappa)","p_SR_int1 <- if(as.integer(time) > as.integer(t_intervention)) 1 - exp(-zeta) else 0","p_SR_int2 <- if(sum(S_inc[as.integer(1):as.integer(time)]) > detect_n) 1 - exp(-zeta) else 0","","## Intervention 1 is time based. Intervention 2 is count based","p_SR <- if(intervention_scenario > 1) p_SR_int2 else p_SR_int1","","n_SI[] <- rbinom(S[i], p_SI[i] * dt)","n_IB[] <- rbinom(I[i], p_IB * dt)","n_BR[] <- rbinom(B[i], p_BR * dt)","n_SR[] <- rbinom(S[i], p_SR * dt)","  ","","## Total population size","N[] <- S[i] + I[i] + B[i] + R[i]","","initial(S[]) <- S_ini","initial(I[]) <- I_ini","initial(B[]) <- 0","initial(R[]) <- 0","","## Convert some values into incidence","initial(S_inc[]) <- 0","update(S_inc[]) <- if (step %% steps_per_day == 0) n_SI[i] else S_inc[i] + n_SI[i]","","initial(V_inc[]) <- 0","update(V_inc[]) <- if (step %% steps_per_day == 0) n_SR[i] else V_inc[i] + n_SR[i]","","initial(InfectedCNT[]) <- 0","update(InfectedCNT[]) <- if (step %% steps_per_day == 0) InfectedCNT[i] + n_SI[i] else InfectedCNT[i] + n_SI[i]","","initial(InterventionFLG[]) <- 0","update(InterventionFLG[]) <- p_SR","","## User inputs","S_ini <- user(499)","I_ini <- user(1)","beta <- user(1.42)","gamma <- user(0.57)","kappa <- user(0.143)","zeta <- user(.1)","detect_n <- user(1)","intervention_scenario <- user(1)","t_intervention <- user(10)","","","nsim <- user(500)","dim(N) <- nsim","dim(S) <- nsim","dim(I) <- nsim","dim(B) <- nsim","dim(R) <- nsim","dim(S_inc) <- nsim","dim(V_inc) <- nsim","dim(InfectedCNT) <- nsim","dim(p_SI) <- nsim","dim(n_SI) <- nsim","dim(n_IB) <- nsim","dim(n_BR) <- nsim","dim(n_SR) <- nsim","dim(InterventionFLG) <- nsim"]}
